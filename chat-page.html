<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STYLEMATE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* è‡ªå®šç¾©å‹•ç•« */
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
                transform: translate3d(0,0,0);
            }
            40%, 43% {
                animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
                transform: translate3d(0, -30px, 0);
            }
            70% {
                animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
                transform: translate3d(0, -15px, 0);
            }
            90% {
                transform: translate3d(0,-4px,0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }

        @keyframes typing {
            0%, 50%, 100% {
                opacity: 1;
            }
            25%, 75% {
                opacity: 0.5;
            }
        }

        .animate-bounce {
            animation: bounce 1s infinite;
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .animate-typing {
            animation: typing 1.5s infinite;
        }

        /* è‡ªå®šç¾©æ¼¸å±¤ - çµ±ä¸€ç´«ç°è‰²èª¿ */
        .bg-gradient-chat {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
        }

        .bg-gradient-border-top {
            background: linear-gradient(90deg, #8b7cf6 0%, #6366f1 50%, #4f46e5 100%);
            opacity: 0.3;
        }

        .bg-gradient-border-bottom {
            background: linear-gradient(90deg, #4f46e5 0%, #6366f1 50%, #8b7cf6 100%);
            opacity: 0.3;
        }

        .bg-gradient-border-left {
            background: linear-gradient(180deg, #8b7cf6 0%, #6366f1 50%, #4f46e5 100%);
            opacity: 0.3;
        }

        .bg-gradient-border-right {
            background: linear-gradient(180deg, #4f46e5 0%, #6366f1 50%, #8b7cf6 100%);
            opacity: 0.3;
        }

        .bg-gradient-assistant {
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 2px solid #e2e8f0;
        }

        .bg-gradient-message-ai {
            background: linear-gradient(90deg, #f1f5f9, #e2e8f0);
        }

        .bg-gradient-message-user {
            background: linear-gradient(90deg, #6366f1, #8b7cf6);
        }

        .bg-gradient-button-like {
            background: linear-gradient(90deg, #6366f1, #8b7cf6);
        }

        .bg-gradient-button-like:hover {
            background: linear-gradient(90deg, #4f46e5, #7c3aed);
        }

        .bg-gradient-button-send {
            background: linear-gradient(90deg, #6366f1, #8b7cf6);
        }

        .bg-gradient-button-send:hover {
            background: linear-gradient(90deg, #4f46e5, #7c3aed);
        }

        /* æ¼¸å±¤æ–‡å­— */
        .text-gradient {
            background: linear-gradient(90deg, #6366f1, #8b7cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* èŠå¤©æ°£æ³¡ä¸‰è§’å½¢ */
        .chat-bubble-tail::after {
            content: '';
            position: absolute;
            right: -1px;
            top: 50%;
            transform: translateY(-50%) translateX(100%);
            width: 0;
            height: 0;
            border-left: 8px solid white;
            border-top: 4px solid transparent;
            border-bottom: 4px solid transparent;
        }

        /* æ»‘å…¥å‹•ç•« */
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-chat">
    <!-- è£é£¾æ€§é‚Šæ¡† -->
    <div class="fixed inset-0 pointer-events-none">
        <div class="absolute top-0 left-0 w-full h-8 bg-gradient-border-top"></div>
        <div class="absolute bottom-0 left-0 w-full h-8 bg-gradient-border-bottom"></div>
        <div class="absolute top-0 left-0 w-8 h-full bg-gradient-border-left"></div>
        <div class="absolute top-0 right-0 w-8 h-full bg-gradient-border-right"></div>
        
        <!-- è§’è½è£é£¾ -->
        <div class="absolute top-2 left-2 w-6 h-6 bg-slate-300 rounded-full opacity-80"></div>
        <div class="absolute top-2 right-2 w-6 h-6 bg-indigo-300 rounded-full opacity-80"></div>
        <div class="absolute bottom-2 left-2 w-6 h-6 bg-violet-300 rounded-full opacity-80"></div>
        <div class="absolute bottom-2 right-2 w-6 h-6 bg-slate-300 rounded-full opacity-80"></div>
    </div>

    <!-- å°äººé ­åŠ©ç† -->
    <div class="fixed top-12 right-12 z-50">
        <div class="relative">
            <!-- åŠ©ç†é ­åƒ -->
            <div class="w-16 h-16 bg-gradient-assistant rounded-full flex items-center justify-center shadow-lg animate-bounce">
                <span id="assistantEmoji" class="text-2xl text-white">ğŸ‘©â€ğŸ’¼</span>
            </div>
            
            <!-- èªªè©±æ°£æ³¡ -->
            <div id="speechBubble" class="absolute -left-32 top-1/2 transform -translate-y-1/2 bg-white rounded-lg px-3 py-2 shadow-lg border-2 border-slate-200 chat-bubble-tail">
                <div id="bubbleText" class="text-sm text-gray-600">å“ˆå›‰ï¼æˆ‘æ˜¯ä½ çš„æ™‚å°šåŠ©ç†ï¼</div>
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å…§å®¹å€åŸŸ -->
    <div class="container mx-auto px-8 py-12 max-w-4xl relative z-10">
        <!-- æ¨™é¡Œå€åŸŸ -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center space-x-3 mb-4">
                <!-- Chat Icon -->
                <svg class="w-8 h-8 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                </svg>
                
                <h1 class="text-3xl font-bold text-gradient">STYLEMATE</h1>
                
                <!-- Sparkles Icon -->
                <svg class="w-8 h-8 text-pink-500 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.5 2.5L16 4l2.5 2.5L16 9l-2.5-2.5L16 4l-2.5-2.5L16 9zm2.5 6L12 10.5 9.5 9 12 7.5 14.5 9 12 10.5z"></path>
                </svg>
            </div>
            <p class="text-gray-600">è®“æˆ‘ä¾†å¹«ä½ æ‰¾åˆ°æœ€å®Œç¾çš„éŸ“å¼ç©¿æ­ï¼</p>
        </div>

        <!-- ä¸»è¦å…§å®¹å€ - å·¦å³åˆ†æ¬„ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <!-- å·¦å´ï¼šèŠå¤©å€åŸŸ -->
            <div class="lg:col-span-2 bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border-4 border-slate-200 p-6">
            <!-- èŠå¤©è¨Šæ¯å€åŸŸ -->
            <div id="chatMessages" class="space-y-4 mb-4 max-h-96 overflow-y-auto">
                <!-- æ­¡è¿è¨Šæ¯ -->
                <div class="flex justify-start">
                    <div class="max-w-md bg-gradient-message-ai text-gray-800 rounded-br-2xl rounded-tr-2xl rounded-tl-sm border-2 border-slate-200 px-4 py-3 shadow-md">
                        <div class="flex items-center space-x-2 mb-2">
                            <span class="text-lg">ğŸ‘©â€ğŸ’¼</span>
                            <span class="text-xs font-semibold text-indigo-600">STYLEMATE åŠ©ç†</span>
                        </div>
                        <p class="text-sm leading-relaxed">
                            å“ˆå›‰ï¼æˆ‘æ˜¯ STYLEMATE çš„æ™‚å°šåŠ©ç† âœ¨<br>
                            å‘Šè¨´æˆ‘ä½ å–œæ­¡ä»€éº¼æ¨£çš„é¢¨æ ¼ï¼Ÿæˆ–æ˜¯æœ‰ä»€éº¼ç‰¹åˆ¥çš„ç©¿æ­éœ€æ±‚å—ï¼Ÿ
                        </p>
                    </div>
                </div>
            </div>

            <!-- æ‰“å­—æŒ‡ç¤ºå™¨ -->
            <div id="typingIndicator" class="hidden flex justify-start mb-4">
                <div class="bg-gradient-message-ai text-gray-800 rounded-br-2xl rounded-tr-2xl rounded-tl-sm border-2 border-slate-200 px-4 py-3 shadow-md">
                    <div class="flex items-center space-x-2">
                        <span class="text-lg">ğŸ¤”</span>
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-pink-400 rounded-full animate-typing"></div>
                            <div class="w-2 h-2 bg-purple-400 rounded-full animate-typing" style="animation-delay: 0.2s;"></div>
                            <div class="w-2 h-2 bg-pink-400 rounded-full animate-typing" style="animation-delay: 0.4s;"></div>
                        </div>
                        <span class="text-xs text-gray-500">æ­£åœ¨æ€è€ƒä¸­...</span>
                    </div>
                </div>
            </div>

            <!-- è¼¸å…¥å€åŸŸ -->
            <div class="flex space-x-3">            
                <input
                    id="messageInput"
                    type="text"
                    placeholder="ä¾‹å¦‚ï¼šæˆ‘å–œæ­¡ç”œç¾é¢¨æ ¼ã€æƒ³è¦ä¸Šç­ç©¿çš„è¡£æœ..."
                    class="flex-1 px-4 py-3 bg-pink-50 border-2 border-slate-200 rounded-xl focus:border-purple-400 focus:outline-none transition-all"
                    onkeypress="handleKeyPress(event)"
                />
                
                <button onclick="sendMessage()" class="p-3 bg-gradient-button-send text-white rounded-xl hover:bg-gradient-button-send shadow-md transition-all">
                    <span class="text-xl">âœ¨</span>
                </button>
            </div>
            </div>
            
            <!-- å³å´ï¼šç…§ç‰‡ä¸Šå‚³å€åŸŸ -->
            <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border-4 border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">ğŸ“· ç…§ç‰‡ä¸Šå‚³</h3>
                
                <div id="uploadArea" class="border-2 border-dashed border-slate-300 rounded-xl p-8 text-center transition-all hover:border-indigo-400">
                    <div class="text-gray-400 mb-4">
                        <svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                    </div>
                    <p class="text-sm text-gray-500 mb-2">ä¸Šå‚³ä½ çš„å…¨èº«ç…§ç‰‡</p>
                    <p class="text-xs text-gray-400">æ”¯æ´ JPG, PNG æ ¼å¼</p>
                    <input type="file" id="photoInput" accept="image/*" class="hidden" />
                    <button onclick="document.getElementById('photoInput').click()" class="mt-4 bg-gradient-button-send text-white px-4 py-2 rounded-lg text-sm hover:opacity-90 transition-all">
                        é¸æ“‡ç…§ç‰‡
                    </button>
                </div>
                
                <!-- ç…§ç‰‡é è¦½å€åŸŸ -->
                <div id="photoPreview" class="hidden mt-6">
                    <h4 class="text-sm font-semibold text-gray-700 mb-2">ç…§ç‰‡é è¦½</h4>
                    <div class="bg-slate-50 rounded-lg p-4">
                        <img id="previewImage" src="" alt="é è¦½åœ–ç‰‡" class="w-full h-48 object-cover rounded-lg">
                        <button onclick="startTryOn()" class="w-full mt-4 bg-gradient-button-like text-white py-2 px-4 rounded-lg text-sm hover:opacity-90 transition-all">
                            é–‹å§‹ç”Ÿæˆè©¦ç©¿åœ– â†’
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- å•†å“æ¨è–¦å€åŸŸ (åˆå§‹éš±è—) -->
        <div id="productRecommendations" class="hidden">
            <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border-4 border-slate-200 p-6 mb-6">
                <h3 class="text-xl font-bold text-center mb-6 text-gradient">âœ¨ AI ç‚ºä½ ç²¾é¸çš„å•†å“ âœ¨</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- å•†å“å¡ç‰‡æœƒç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
                </div>
                
                <div class="text-center mt-6">
                    <p class="text-sm text-gray-600 mb-4">é¸æ“‡ä½ å–œæ­¡çš„å•†å“ï¼Œæˆ‘å¯ä»¥ç‚ºä½ ç”Ÿæˆè©¦ç©¿æ•ˆæœå“¦ï¼ ğŸ“¸</p>
                </div>
            </div>
        </div>

        <!-- è¿”å›æŒ‰éˆ• -->
        <div class="text-center">
            <a href="index.html" class="inline-flex items-center space-x-2 text-purple-600 hover:text-purple-700 font-medium">
                <span>â†</span>
                <span>è¿”å›é¦–é </span>
            </a>
        </div>
    </div>

    <script>
        let conversationStep = 0;
        
        const products = [
            {
                id: 'dress1',
                name: 'éŸ“å¼ç”œç¾èŠ±æœµå°èŠ±æ´‹è£',
                price: '1,299',
                emoji: 'ğŸ‘—',
                description: 'ç”œç¾å¯æ„›çš„èŠ±æœµå°èŠ±æ´‹è£ï¼Œè¼•è–„é€æ°£çš„é¢æ–™'
            },
            {
                id: 'shirt1',
                name: 'å„ªé›…Vé ˜è·å ´è¥¯è¡«',
                price: '899',
                emoji: 'ğŸ‘š',
                description: 'ç°¡ç´„å„ªé›…çš„Vé ˜è¥¯è¡«ï¼Œè·å ´å¿…å‚™å–®å“'
            },
            {
                id: 'jacket1',
                name: 'è¡—é ­é¢¨æ ¼å¯¬é¬†ç‰›ä»”å¤–å¥—',
                price: '1,899',
                emoji: 'ğŸ§¥',
                description: 'å¾©å¤å¯¬é¬†ç‰ˆå‹ç‰›ä»”å¤–å¥—ï¼Œè¡—é ­é¢¨æ ¼é¦–é¸'
            },
            {
                id: 'skirt1',
                name: 'é«˜è…°Aå­—çŸ­è£™',
                price: '699',
                emoji: 'ğŸ‘—',
                description: 'é¡¯ç˜¦é«˜è…°è¨­è¨ˆAå­—çŸ­è£™ï¼Œç”œç¾å¯æ„›'
            },
            {
                id: 'knit1',
                name: 'éŸ“ç³»ç°¡ç´„é‡ç¹”ä¸Šè¡£',
                price: '799',
                emoji: 'ğŸ‘•',
                description: 'æŸ”è»Ÿèˆ’é©çš„é‡ç¹”ä¸Šè¡£ï¼Œç°¡ç´„ç™¾æ­'
            },
            {
                id: 'jeans1',
                name: 'å€‹æ€§ç ´æ´ç‰›ä»”è¤²',
                price: '1,299',
                emoji: 'ğŸ‘–',
                description: 'æ™‚å°šç ´æ´è¨­è¨ˆç‰›ä»”è¤²ï¼Œå±•ç¾å€‹æ€§é¢¨æ ¼'
            }
        ];

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message) {
                // é¡¯ç¤ºç”¨æˆ¶è¨Šæ¯
                addUserMessage(message);
                input.value = '';
                
                // é¡¯ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
                showTypingIndicator();
                
                // æ›´æ–°åŠ©ç†è¡¨æƒ…
                updateAssistant('ğŸ¤”', 'è®“æˆ‘æƒ³æƒ³...');
                
                // æ¨¡æ“¬AIæ€è€ƒæ™‚é–“å¾Œå›æ‡‰
                setTimeout(() => {
                    hideTypingIndicator();
                    processUserMessage(message);
                }, 1500);
            }
        }

        function addUserMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex justify-end slide-in';
            messageDiv.innerHTML = `
                <div class="max-w-sm bg-gradient-message-user text-white rounded-bl-2xl rounded-tl-2xl rounded-tr-sm px-4 py-3 shadow-md">
                    <p class="text-sm leading-relaxed">${message}</p>
                </div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addAIMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex justify-start slide-in';
            messageDiv.innerHTML = `
                <div class="max-w-md bg-gradient-message-ai text-gray-800 rounded-br-2xl rounded-tr-2xl rounded-tl-sm border-2 border-slate-200 px-4 py-3 shadow-md">
                    <div class="flex items-center space-x-2 mb-2">
                        <span class="text-lg">ğŸ‘©â€ğŸ’¼</span>
                        <span class="text-xs font-semibold text-indigo-600">STYLEMATE åŠ©ç†</span>
                    </div>
                    <p class="text-sm leading-relaxed">${message}</p>
                </div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function processUserMessage(message) {
            conversationStep++;
            
            let aiResponse = '';
            let shouldShowProducts = false;
            
            if (conversationStep === 1) {
                // ç¬¬ä¸€æ¬¡å°è©±
                aiResponse = `æˆ‘äº†è§£ä½ çš„å–œå¥½äº†ï¼${message.includes('ç”œç¾') ? 'ç”œç¾é¢¨æ ¼' : message.includes('è·å ´') ? 'è·å ´é¢¨æ ¼' : message.includes('è¡—é ­') ? 'è¡—é ­é¢¨æ ¼' : 'ä½ çš„é¢¨æ ¼'}çœŸçš„å¾ˆæ£’å‘¢ï¼<br><br>è®“æˆ‘ç‚ºä½ æ¨è–¦ä¸€äº›ç²¾é¸çš„å•†å“ï¼Œæ¯ä¸€ä»¶éƒ½æ˜¯æˆ‘ç‰¹åˆ¥ç‚ºä½ æŒ‘é¸çš„ âœ¨`;
                shouldShowProducts = true;
                updateAssistant('ğŸ¤©', 'æ‰¾åˆ°å®Œç¾å•†å“äº†ï¼');
            } else {
                // å¾ŒçºŒå°è©±
                aiResponse = 'è¬è¬ä½ çš„å›é¥‹ï¼æˆ‘æœƒæ ¹æ“šä½ çš„å–œå¥½ç¹¼çºŒç‚ºä½ æ¨è–¦æ›´åˆé©çš„å•†å“ ğŸ’•';
                updateAssistant('ğŸ˜Š', 'äº†è§£ï¼');
            }
            
            addAIMessage(aiResponse);
            
            if (shouldShowProducts) {
                // å»¶é²é¡¯ç¤ºå•†å“æ¨è–¦
                setTimeout(() => {
                    showProductRecommendations();
                }, 1000);
            }
        }

        function showProductRecommendations() {
            const recommendationsDiv = document.getElementById('productRecommendations');
            const grid = recommendationsDiv.querySelector('.grid');
            
            // æ¸…ç©ºç¾æœ‰å…§å®¹
            grid.innerHTML = '';
            
            // éš¨æ©Ÿé¸æ“‡3å€‹å•†å“
            const shuffled = [...products].sort(() => 0.5 - Math.random());
            const selectedProducts = shuffled.slice(0, 3);
            
            selectedProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'bg-white rounded-xl p-6 shadow-md border border-pink-100 hover:shadow-lg transition-all hover:-translate-y-2';
                productCard.innerHTML = `
                    <div class="text-center mb-4">
                        <div class="w-20 h-20 bg-gradient-to-br from-pink-100 to-purple-200 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl">${product.emoji}</span>
                        </div>
                        <h4 class="font-semibold text-gray-800 mb-2">${product.name}</h4>
                        <p class="text-xs text-gray-600 mb-3">${product.description}</p>
                        <div class="text-lg font-bold text-purple-600 mb-4">NT$ ${product.price}</div>
                    </div>
                    
                    <div class="space-y-2">
                        <button onclick="likeProduct('${product.id}')" class="w-full bg-gradient-button-like text-white py-2 px-4 rounded-lg text-sm font-medium hover:bg-gradient-button-like transition-all flex items-center justify-center space-x-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                            </svg>
                            <span>æˆ‘å–œæ­¡ï¼ç”Ÿæˆè©¦ç©¿åœ–</span>
                        </button>
                        <button onclick="moreInfo('${product.id}')" class="w-full bg-gray-100 text-gray-600 py-2 px-4 rounded-lg text-sm font-medium hover:bg-gray-200 transition-all">
                            äº†è§£æ›´å¤šè©³æƒ…
                        </button>
                    </div>
                `;
                grid.appendChild(productCard);
            });
            
            // é¡¯ç¤ºæ¨è–¦å€åŸŸ
            recommendationsDiv.classList.remove('hidden');
            recommendationsDiv.classList.add('slide-in');
            
            // æ»¾å‹•åˆ°å•†å“å€åŸŸ
            setTimeout(() => {
                recommendationsDiv.scrollIntoView({ behavior: 'smooth' });
            }, 300);
            
            updateAssistant('ğŸ˜Š', 'çœ‹çœ‹é€™äº›å•†å“å§ï¼');
        }

        function likeProduct(productId) {
            const product = products.find(p => p.id === productId);
            
            // å„²å­˜é¸ä¸­çš„å•†å“
            window.selectedProduct = product;
            
            updateAssistant('ğŸ‘©â€ğŸ’¼', 'éœ€è¦ä½ çš„ç…§ç‰‡ï¼');
            
            addAIMessage(`å¤ªæ£’äº†ï¼ä½ é¸æ“‡äº†ã€Œ${product.name}ã€âœ¨<br><br>ç¾åœ¨è«‹åœ¨å³é‚Šä¸Šå‚³ä½ çš„å…¨èº«ç…§ç‰‡ï¼Œæˆ‘å°±å¯ä»¥ç‚ºä½ ç”Ÿæˆè©¦ç©¿æ•ˆæœåœ–äº†ï¼ğŸ“¸`);
        }

        function moreInfo(productId) {
            const product = products.find(p => p.id === productId);
            addAIMessage(`é—œæ–¼ã€Œ${product.name}ã€ï¼š<br><br>${product.description}ï¼Œåƒ¹æ ¼æ˜¯ NT$ ${product.price}ã€‚é€™æ¬¾å•†å“å¾ˆå—æ­¡è¿å“¦ï¼<br><br>æƒ³è¦è©¦ç©¿çœ‹çœ‹æ•ˆæœå—ï¼Ÿ âœ¨`);
            updateAssistant('ğŸ¤”', 'è®“æˆ‘ä»‹ç´¹ä¸€ä¸‹...');
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').classList.remove('hidden');
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').classList.add('hidden');
        }

        function updateAssistant(emoji, bubbleText) {
            document.getElementById('assistantEmoji').textContent = emoji;
            document.getElementById('bubbleText').textContent = bubbleText;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // ç…§ç‰‡ä¸Šå‚³è™•ç†
        document.getElementById('photoInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // é¡¯ç¤ºé è¦½
                    const previewImage = document.getElementById('previewImage');
                    previewImage.src = e.target.result;
                    document.getElementById('photoPreview').classList.remove('hidden');
                    
                    // å„²å­˜ç…§ç‰‡
                    window.uploadedPhoto = e.target.result;
                    
                    updateAssistant('ğŸ‘©â€ğŸ’¼', 'ç…§ç‰‡å¾ˆæ£’ï¼');
                    addAIMessage(`ç…§ç‰‡ä¸Šå‚³æˆåŠŸï¼ç…§ç‰‡çœ‹èµ·ä¾†å¾ˆä¸éŒ¯å‘¢ âœ¨<br><br>ç¾åœ¨é»æ“Šã€Œé–‹å§‹ç”Ÿæˆè©¦ç©¿åœ–ã€æŒ‰éˆ•ï¼Œæˆ‘å°±å¯ä»¥å¹«ä½ åˆæˆè©¦ç©¿æ•ˆæœäº†ï¼`);
                }
                reader.readAsDataURL(file);
            }
        });

        // é–‹å§‹è©¦ç©¿åŠŸèƒ½
        function startTryOn() {
            if (!window.selectedProduct || !window.uploadedPhoto) {
                alert('è«‹å…ˆé¸æ“‡å•†å“å’Œä¸Šå‚³ç…§ç‰‡ï¼');
                return;
            }
            
            updateAssistant('ğŸ‘©â€ğŸ’¼', 'ç”Ÿæˆä¸­...');
            addAIMessage(`æ­£åœ¨ç”Ÿæˆä½ ç©¿è‘—ã€Œ${window.selectedProduct.name}ã€çš„è©¦ç©¿æ•ˆæœåœ–...<br><br>è«‹ç¨ç­‰ä¸€ä¸‹ï¼Œé¦¬ä¸Šå°±å¥½äº†ï¼ â³`);
            
            // æ¨¡æ“¬è™•ç†æ™‚é–“å¾Œè·³è½‰
            setTimeout(() => {
                updateAssistant('ğŸ‘©â€ğŸ’¼', 'å®Œæˆäº†ï¼');
                addAIMessage(`è©¦ç©¿åœ–ç”Ÿæˆå®Œæˆï¼ä½ ç©¿é€™ä»¶${window.selectedProduct.name}çœŸçš„è¶…ç¾çš„ âœ¨<br><br>å³å°‡ç‚ºä½ å±•ç¤ºçµæœ...`);
                
                // è·³è½‰åˆ°çµæœé é¢
                setTimeout(() => {
                    window.location.href = 'tryon-result.html';
                }, 1500);
            }, 3000);
        }

        // é é¢è¼‰å…¥æ™‚çš„æ­¡è¿å‹•ç•«
        window.addEventListener('load', () => {
            const assistant = document.querySelector('.bg-gradient-assistant');
            assistant.style.animation = 'bounce 1s infinite';
            
            // 5ç§’å¾Œåœæ­¢å½ˆè·³
            setTimeout(() => {
                assistant.style.animation = '';
            }, 5000);
            
            // 5ç§’å¾Œæ›´æ–°æ°£æ³¡æ–‡å­—
            setTimeout(() => {
                updateAssistant('ğŸ‘©â€ğŸ’¼', 'é–‹å§‹èŠèŠå§ï¼');
            }, 5000);
        });
    </script>
</body>
</html>